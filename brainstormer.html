<html>
    <head>
        <title>FTJ Brainstormer</title>
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script src="lib/jquery.csv-0.7.min.js" type="text/javascript"></script>
        <script>
            var spreadsheetURL = "https://docs.google.com/spreadsheet/pub?key=0AmfuCT5xFzgOdEw0OFJ5dS12Z2U5SUpRY3FEV1dRYXc&single=true&gid=0&output=csv"
            // load Google Spredsheat data
            // note: the spreadsheet must be "published" from the Google Docs spreadsheet page
            $(document).ready(function() {
                $.ajax({
                    type: "GET",
                    url: spreadsheetURL,
                    dataType: "text",
                    success: function(data) { createElements($.csv.toArrays(data));}
                 });

            });
            
            var toTake = 2; // number of elements to combine

            function createElements(table) {
                var ideaSource = [];
                for(var row=0; row<table.length; row++) {
                    // will be displaying entries from first column only
                    ideaSource.push(table[row][0]);
                }

                $('#shuffle').click(function() {
                    var idea = getIdea(ideaSource, toTake);
                    $("<div id='row'></div>").text(idea).appendTo("#idea");
                });
            }

            function getIdea(ideaSource, howMany) {
                var a = [];
                for(var i=0; i<howMany; i++) {
                    do {
                        var alreadyExists = false;
                        var r = Math.floor(Math.random()*ideaSource.length);
                        var idea = ideaSource[r];
                        for(var j=0; j<a.length; j++) {
                            if(a[j]==idea) alreadyExists = true;
                        }
                    }
                    while(alreadyExists);
                    a.push(idea);
                }
                return a.join(' ');
            }
        </script>
    </head>
    <body>
        <div id='lol'>Loading</div>
        <div id='idea'>Loading</div>
        <input type='button' id='shuffle' value='Lolz'/>
    </body>
</html>
