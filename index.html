<html>
    <head>
        <title>FTJ Brainstormer</title>
        <link rel="stylesheet" href="stylesheets/style.css" /> 
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script src="lib/jquery.csv-0.7.min.js" type="text/javascript"></script>
        <script src="lib/array_stuff.js" type="text/javascript"></script>
        <script>
            var spreadsheetURL = "https://docs.google.com/spreadsheet/pub?key=0AmfuCT5xFzgOdEw0OFJ5dS12Z2U5SUpRY3FEV1dRYXc&single=true&gid=0&output=csv"
            // load Google Spredsheat data
            // note: the spreadsheet must be "published" from the Google Docs spreadsheet page
            $(document).ready(function() {
                $.ajax({
                    type: "GET",
                    url: spreadsheetURL,
                    dataType: "text",
                    success: function(data) { 
                        var table = $.csv.toArrays(data).transpose();
                        for(var i=0; i<table.length; i++) table[i].clean('');
                        createElements(table);
                    }
                 });

            });
            
            function createElements(table) {
                $('#shuffleBtn').show();
                var brainstorm = function() {
                    var idea = getIdea(table);
                    //$("<div id='row'></div>").text(idea).appendTo("#idea");
                    $("#idea").text(idea);
                }
                $('#shuffleBtn').click(brainstorm);
                brainstorm();
            }

            function getIdea(ideaSource) {
                var a = [];
                for(var row=0; row<3; row++) {
                    var e = Math.floor(Math.random()*ideaSource[row].clean().length);
                    a.push(ideaSource[row][e]);
                }
                return a.join(' ');
            }
        </script>
    </head>
    <body>
        <h1>Game Design Brainstormer</h1>

        <div id='idea'>Loading ideas...</div>
        <a href='javascript:void()' class='btn' id='shuffleBtn' style='display:none'>Give me another idea!</a>

        <div class='footer'>Powered by YOU! Enrich the brainstormer by adding ideas <a href='https://docs.google.com/spreadsheet/ccc?key=0AmfuCT5xFzgOdEw0OFJ5dS12Z2U5SUpRY3FEV1dRYXc'>here</a></div>


        <div class='sharebar'>
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=59444788870";
              fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>
<div id="fb-root"></div>
            <div class="fb-like" data-href="http://bgr.github.com/brainstormer/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div>


            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://bgr.github.com/brainstormer/" data-text="#fuckthisjam Game Design Brainstormer:" data-via="_bgr_" data-related="FuckThisJam">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

            <span id='fal-icon'><img src='images/fal_16.png' /></span>
            <div class="g-plusone" data-size="medium"></div>
            <script type="text/javascript">
              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
            </script> 
        </div>
    </body>
</html>
