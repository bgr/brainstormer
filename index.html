<html>
    <head>
        <title>FTJ Brainstormer</title>
        <link rel="stylesheet" href="stylesheets/style.css" /> 
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script src="lib/jquery.csv-0.7.min.js" type="text/javascript"></script>
        <script src="lib/array_stuff.js" type="text/javascript"></script>
        <script>
            var spreadsheetURL = "https://docs.google.com/spreadsheet/pub?key=0AmfuCT5xFzgOdEw0OFJ5dS12Z2U5SUpRY3FEV1dRYXc&single=true&gid=0&output=csv"
            // load Google Spredsheat data
            // note: the spreadsheet must be "published" from the Google Docs spreadsheet page
            $(document).ready(function() {
                $.ajax({
                    type: "GET",
                    url: spreadsheetURL,
                    dataType: "text",
                    success: function(data) { 
                        var table = $.csv.toArrays(data).transpose();
                        for(var i=0; i<table.length; i++) table[i].clean('');
                        createElements(table);
                    }
                 });

            });
            
            function createElements(table) {
                $('#shuffleBtn').show();
                var brainstorm = function() {
                    var idea = getIdea(table);
                    //$("<div id='row'></div>").text(idea).appendTo("#idea");
                    $("#idea").text(idea);
                }
                $('#shuffleBtn').click(brainstorm);
                brainstorm();
            }

            function getIdea(ideaSource) {
                var a = [];
                for(var row=0; row<3; row++) {
                    var e = Math.floor(Math.random()*ideaSource[row].clean().length);
                    a.push(ideaSource[row][e]);
                }
                return a.join(' ');
            }
        </script>
    </head>
    <body>
        <h1>Game Design Brainstormer</h1>

        <div id='idea'>Loading ideas...</div>
        <a href='#' class='btn' id='shuffleBtn' style='display:none'>Give me another idea!</a>

        <div class='footer'>Enrich the brainstormer by adding your hated genre <a href='https://docs.google.com/spreadsheet/ccc?key=0AmfuCT5xFzgOdEw0OFJ5dS12Z2U5SUpRY3FEV1dRYXc'>here</a></div>
    </body>
</html>
